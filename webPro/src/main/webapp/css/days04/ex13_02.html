<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="shortcut icon" href="http://localhost/webPro/images/SiSt.ico">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<style>
	div {
		width: 300px;
		height: 100px;
		background-color: yellow;
		border: 1px solid black;
	}
</style>
</head>
<body>
	<h3>css 2D 변환</h3>
	<pre>
		이동, 비율 조정, 회전, 기울기
	</pre>

	<input type="radio" name="direction" value="1" checked> 시계방향
	<input type="radio" name="direction" value="-1"> 반시계방향
	<br>
	<button>회전 시작</button>
	<button disabled>회전 멈춤</button>

	<p>.</p>
	<p>.</p>
	<p>.</p>

	<div>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Soluta quia doloremque porro placeat fugit id.</div>

	<script>
		var angle = 1; // 회전 각도
		var direction = 1; // 회전 방향 1(시계), -1(반시계)
		var timer;

		document.querySelector("button:first-of-type").onclick = function() {
			var radios = document.querySelectorAll("input[name='direction']");
			for(var i=0; i<radios.length; i++) {
				if(radios[i].checked) {
					direction = radios[i].value;
				}
			}
			/*
			var target = document.querySelector("div");
			target.style.transform = "rotate(" + angle + "deg)";
			angle += parseInt(direction);
			console.log("> angle : " + angle);
			*/

			// 재귀호출
			// 10/1000초마다 targetRotate 함수 호출
			timer = setInterval(targetRotate, 10);

			// 회전 시작 버튼
			this.disabled = true; // 비활성화
			// 회전 멈춤 버튼
			document.querySelector("button:last-of-type").disabled = false; // 활성화
		};

		document.querySelector("button:first-of-type").onclick = function() {
			clearInterval(timer);
			this.disabled = true; 
			document.querySelector("button:first-of-type").disabled = false; 
		};

		function targetRotate() {
			var target = document.querySelector("div");
			target.style.transform = "rotate(" + angle + "deg)";
			angle += parseInt(direction);
			console.log("> angle : " + angle);
		};
	</script>

</body>
</html>